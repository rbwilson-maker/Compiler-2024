//test return 12

// Nants ingonyama bagithi baba!
// A basic struct + array of struct test

/*
                              ccc  c  c  ccc                                
                               $   $cc$  $==                                
                               $   $  $  $cc                                
=ccr=    ========================================================  _,r====c, 
 )$F     =cc= ,z=""?b, `$c.     3$"    "$$" "$P" "3$" "$c,    "$" cP"     `$ 
 )$F      $$ zP      ?b $F?b,   3$      $$,/"     3$   $"?c,   $ z$         
 )$F      $$<$F       $>$F  ?b, 3$      $$C       3$   $  "?c  $ $$     ,,,, 
 )$F      $$ ?b      z$'$F   `?bJ$      $$`"c,    3$   $    "?c$ `$L      $$ 
,J$L,,,c" $$  "b,..,cP' $L     `?P      $$   ?b,  3$   $      "$  `?c,,.,,P" 
`""""""' `""'   """"   `""      `'     """"  """ `""' """      "    `""""" 
                               . , ,                                        
                            \,c$$P??i?=,                                    
                    ,d$$"zd$$PF?i<$$$i$$$$c                                 
                    $$$"d$$$Lh$?CJ$$$$$$$$$$c                               
                    `$'cc`$$$$$$$$$$$$$$$$$$$r.,                            
                     F`,,"?$$$$$$$P",ccc"$$$$$ $$$$c                        
                    ,'="`"J$$$$$$",;,,"$L?$$$$`$$$$$                        
                   .$b,_,c$$$$$$'/"`?$c $ $$$FJ$$$$"                        
                   )$$P:-`?????'.    ?".? "",,`"?"                          
                .,."$$$$c,,,,,c$$$bcc-,z$$$$$$$$,                           
            ,c$$$$$$c`?$$????$$$$$$",$$$$$$$$$P",                           
          ,$$$$$$$$$$$,";chhcJ$F"`"<c,"??"',cc,$$                           
          `$$$$$$$$$$$$ ?$$$$$ ,!!!<$"d$$>$$$$>P"                           
          4,"?$$$$$$P""d ,,"""".'''."-3$$L<$$F,;!                           
          `$$`cccc,<$$$'J$$$$ !!!!!!!'---->;;!!                             
            "-$$$$P`??",$$$$$P';;;;!!!!!!!!!!!                              
            <>;;;;<!!',$$$$$$L'!!!!'''''<!!!!!                              
             ((,;;;!:<$$$$$$$$$c;;;!!!!!!!!!!!                              
            `!!''''' d$$$$$$$$??cccc ccccc`!!!>                             
             ::!!!! $$$$$$",cchhhcF"J$$$$$ !!!!;                            
 z4$ $e   ,ccc,``',d,c cb-,"?$$$$$$c`$$$$$ <!!!!>                           
$$4$L"??, 4$$$$$.$P $$'$P,$$,?$$$$$$$$$$$F  `!!!!!                          
)P.,c$$$c4c"$$$FJ$,b`P-?,$$P" $$$$$$$$$$$     ``'!!!,                       
".$$$$$$$,"c3$$F<$$ cd$$$c c$>$$$$$$$$$$P        `<!!!;,                    
  "$$$$$$$ $ $$$<$$,?$$$$$;?$b?$$$$$$$$$           `!!!!>                   
    "$$$$$ $ $$$.?$$,?$$$$F<$$<$$$$$$$$F             `!!!!!;,               
     `$$$$,$ $$$>,"?? $$$$F<$$<$$$$$$F                `!!!!!!>;,            
      ?$$$ $P"  `!!!!>?$$$>d$P<$$P"                     <!!!!!!!>;,         
       "$"."     `!!!>`$$$,$$-,ccr"                      `!!!!!!!!!!!>,     
                  !!!;<$$'dF  $$F                          <!!!!!!!!!!!!;   
                  !!!!,` "    $F                            `!!!!!!!!!!!!!; 
                  !!!!!!!>    $                              `<!!!!!!!!!!!!! 
                  !!!!!!!!    `             ..nnnMMhnnr.dz.- !><!!!!!!!!!!!' 
                  !!!!!!!!!                )MP"',,`"?'.,,,.  !!,!!!!!!!!!!>` 
                 <!!!!!!!!!!,           .nMMM.$$$$$hh$$$$$$$ !!!!!!!!!!(`!!> 
                  ,!!!!!!!!!!>         nMMMMM'?``))"$"``))`?>!!!!!!!!!!!'  < 
                   ,,!!!!!!!!!!,       """MMMP:-=<))<.,,J;): !!!!!!!!!!     
                    ``'!!!!!!!!!! .     ,r"',c$c=:::,,`""=: ;!!!!!!!!',     
                        `<!!!!!!!> "MMMMf<$$P""--,c$$$$$$$$F!!!!!!!!!;MMn,  
                          `'!!!!`.MMMMMP .:,cF:: $$$$$$$$$$"!!!!!!!! MMMMM, 
                            ``!  .MMMM c.::':::: $$$$??$$P' !!!!!!!'4MMMML" 
                              `'JMMM",c'`:',c`:',$$$",dr"xP,!!!!!!!,MMMMMM> 
                               .MMM"c$F,d$$$bc$$P",c$$"dMM !!!!!!! dMMMM4Mb 
                                M>.""" $$$$$$P",c$$$$F,MMP'!!!!!!!,MMMMM  " 
                                "M,?$$$ccccccP??",nnnMMMM !!!!!!!>dMMMMM>   
                                 )Mn`???????,dMMMMMMMMMP <!!!!!!!>MMMMMMM   
                                 MMMMbbnMMMMMMMMMMMMMMM !!!!!!!!! MMMMMMM   
                               dMMMMMMMMMMMMMMMMMMMMMM <!!!!!!!!'JMMMMM>4   
                              4MMMMMMMMMMMMMMMMMMMMMMM,!!!!!!!!! MMMMMMf    
                              `MMM"MMMMMMMMMMMMMMMMM"'!!!!!!!!!!,MMMMM'     
                               MM' MMMMMMMMMMMMMMP,u;';!!!!!!!',MMMP)\      
                               MM  )MMMMMMMMMMP,"JMM'!!!!!!!! d4MM\ '       
                              ,M'  ' 4MMM MMf4 MMMMM'!!!!!!!> F4M"          
                              '      `MM'i`M ,dMMMMM !!!!!!!!.F"            
                                     d`P,M,>dMMMMMMM !!!!!!!!:F             
                                     4bnMMMMMMMMMMMMb`!!!!!!!<F             
                                     `MMMMMMMMMMMMMMMb`!!!!!!`$             
                                      "MMMMMMMMMMMMMMM,`!!!!! $,            
                                       4MMMMMMMMMMMMMMM,<!!!!>"$            
                                        `TMMMMMMMMMMMMMMx`<!!!,"b           
                                          `4MMMMMMMMMMMMMMx`!!!,`b          
                                            "TMMMMMMMMMMMMMMn`<!,"?,        
                                               "T4MMMMMMMMMMMMx`<!,??>      
                                                  `"4MMMMMMMMMMM.<!!>>\,    
                                                       "4MMMMMMMM.`!!!!,"-  
                                                          "TMMMMMMr`!!!!!!>: 
                                                        ,4 `."MMMMM.`!!!!!!! 
                                                       JP `LTMrTMMMMx`!!!!!! 
                                                      z":!>` 4MMMMMMM.`!!!!! 
                                                    ,P":!!!!, 4MMMMMML)`!!!! 
                                ..,,,,..           z".!!!!!!!, 4MMMMMM`L`!!! 
                        .,xxxdXXXXXXXXXXXXXXxxx,,..' !!!!!',z'         $'!!! 
                    .xJXXXXYYYYYYYYYYYYXXXXXXXXXXXXXXhxx,.'            ' !!! 
              .xxXXYYYYY))))>iiiiiiiii<<<(YYYYYYYXXXXXXXXXXXXXXxx,      b`!! 
         ..xJXYYCLxxxXXXYYYYYYYXXXXXXXXXXXXXXxx;((('YYYYYXXXXXXXXXXXXxxx, `! 
       xXYYY>>YYYY)Ciiiiiiiiiiiiii\\\<<<<<<YYYYXXXXXXxxx)<YYYYYXXXXXXXXXXXXX 
     :XYXYYYYYYY>>>>>>>)))))<CCYYXXXXXXXXhhiii/<>xxdXXXXXXXXXXXX>ii)<YYYYXXX 
     YYYYYY((((>ii()>>>>>>(<<<<<==-<<<<YYXXXXXXxi;/'))<(<YXXXXXXXXXXXXXii)<Y 
    ;YY((>>>,==>'>;>>>'''````::;;;;;;;;;/<<<<<YYXXXXXxxi;/('YXXXXXXXXXXXXXXX 
   (Y>)>;>'-.'    _,,,z=====;c;,__  ```<<<((iiii('YYYXXXXXXXxxxx('YXXXXXXXXX 
   (;>'.`-  ,zcc="::::::::::::::::::"v,    ``<((((((;(('YYXXXXXXXXXx/((YYXXX 
  `((.`  ,r="::::::::::::::::::::::::::'=v,    `<<(;;;;(YYXXXXXXXXXXXXXXX>ii 
    `( ,J:::::::::::::::::::::::::::::::::::":=,_   ```<<>;(('<<<YYXXXXXXXXX 
      .::::::::::::::::;,r==~~"''''~=\;x`;;:::::::t,_      '''<<((>;'<<XXXXX 
       `::::::::::';r/~.`.`.`.`.`.`.`.`.`."~=-x,`;::::\v,_   .    ''(;/<<<XX 
         `:::::r;=".`.`.`.`. .`.`.`.`.`.`.`.`.`.".=_;::::::?=,,_  ^- '<(;;;< 
          ``::/.`.`.`.`.`.`.`.`.`.`.`. .`.`.`.`.`.`.".=;:::::::::\r,_   '<<; 
            `.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`."=,;::::::::::\z,_  
              `.`.`.`,`.`.`.`.`. .`.`.`.`.`.`.`.`.`.`.`.`.`."~\_;::::::::::7 
                `.`;^.`.`.`.`.`.`.`.`.`.`.`.`. .`.`.`.`.`.`.`.`.",```::::::: 
                  `;`. .`.`.` `.`.`     `. . .`.`.    `.`.`. .` `.`.`">+u.. 
                    `-,,  ` `. . .`.`.`.`.`.,,z-r~"":~::--'""-=-+n;,,_. .`." 
                        '.`.`.`. .`.`.`..r+" . . .  `.`. . . . .`   .."~=n;_ 
                           .`. .` `. r="". . .  `. . .`.`.`.`.`.`.`.`.`.    
                              `.` .r". . . .`. . . .   .`.`.`    .`.`.  `.`. 
                                . :( .` `.`.`.  `  . .                 . .   
                                  <:.  . .  `  . .`. .   . .       . . . .`. 
                                  `` . .  `. . .`.  `  . . . . . . . . .`.` 
                                      `. . .   .  `. . . .   ` _  ....     . 
                                         . .`    . . .`.;f`":"`..`"`  `"""~- 
                                          .. ..  . . ,(" '.                 
                                             .. ... .f  `.   . .`.`.`.`.`.`. 
                                              .:`. .<  .   .`.`.`         ` 
                                                  `.:<`  .`.`        . .     
                                                    '>  `.`    . .`.` ` ` ` 
                                                      ` `.   .` `        . . 
                                                        `. .`    . .`.`.`.`. 
                                                           . .`.` `          
                                                             .`  .   .   - , 
                                                                .. .   :`-`` 
                                                                  ` . `,`  . 
                                                                     `.  .`. 
                                                                         . . 
                                                                           . 
*/

struct animal
{
  int legs;
  int age;
  bool alive;
};

int main()
{
  struct animal [] jungle;
  jungle = alloc_array(struct animal, 5);
  int i;
  int years;

  /* initialize jungle */
  /* 0 : 0; 0; true
     1 : 1; 10; true
     2 : 2; 20; true
     3 : 3; 30; true
     4 : 4; 40; true */
  for (i = 0; i < 5; i++) {
    jungle[i].legs = i;
    jungle[i].age = i * 10;
    jungle[i].alive = true;
  }

  /* time passes(10years) */
  /* 0 : 0; 10; true
     1 : 1; 20; true
     2 : 2; 30; true
     3 : 3; 40; true
     4 : 4; 50; true */
  int population = 0;

  for (i = 0; i < 5; i++) {
    jungle[i].age += 10;
    /* death */
    if (jungle[i].age > 35) jungle[i].alive = false;
    else {
      population ++;
    }
  }
  /* 0 : 0; 10; true
     1 : 1; 20; true
     2 : 2; 30; true
     3 : 3; 40; false
     4 : 4; 50; false */
  /* survived population = 3 */

  struct animal [] fresh_jungle;
  population *= 2;
  fresh_jungle = alloc_array(struct animal, population);
  int population_count = 0;

  /* mating season */
  for (i = 0; i < 5; i++) {
    if (jungle[i].alive == true) {
      fresh_jungle[population_count].legs = jungle[i].legs;
      fresh_jungle[population_count].age = jungle[i].age;
      fresh_jungle[population_count].alive = jungle[i].alive;
      population_count ++;

      /* circle of life */
      struct animal* newborn;
      newborn = alloc(struct animal);
      newborn -> legs = jungle[(i+1)%5].legs + jungle[i].legs;
      newborn -> age = 0;
      newborn -> alive = true;
      fresh_jungle[population_count].legs = newborn -> legs;
      fresh_jungle[population_count].age = newborn -> age;
      fresh_jungle[population_count].alive = newborn -> alive;
      population_count ++;
    }
  }
  /* 0 : 0; 10; true
     1 : 1; 0; true
     2 : 1; 20; true
     3 : 3; 0; true
     4 : 2; 30; true
     5 : 5; 0; true */

  int legs = 0;

  for (i = 0; i < population; i++) {
    legs += fresh_jungle[i].legs;
  }

  return legs;
}